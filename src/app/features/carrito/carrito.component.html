<div class="py-10 px-4 md:px-16 bg-white min-h-screen">
  <h1 class="text-3xl font-bold text-center mb-6">Carrito de Compras</h1>

  <div class="grid md:grid-cols-3 gap-8">
    <div class="md:col-span-2">
      <table class="min-w-full border border-gray-200 text-sm">
        <thead>
          <tr class="bg-yellow-300 text-left text-gray-800">
            <th class="px-4 py-3">Producto</th>
            <th class="px-4 py-3">Precio</th>
            <th class="px-4 py-3">Cantidad</th>
            <th class="px-4 py-3">Subtotal</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let producto of carrito" class="border-t hover:bg-gray-50">
            <td class="px-4 py-4 flex items-center gap-4">
              <img [src]="producto.imagen" alt="Imagen" class="w-16 h-16 object-cover rounded" />
              <div>
                <p class="font-semibold">{{ producto.nombre }}</p>
                <p class="text-gray-500 text-xs">
                  Color: {{ producto.color }} | Talla: {{ producto.talla }}
                </p>
              </div>
            </td>
            <td class="px-4 py-4 font-medium text-gray-700">S/. {{ producto.precio }}</td>
            <td class="px-4 py-4">
              <div class="flex items-center gap-2">
                <button (click)="disminuirCantidad(producto)" class="w-8 h-8 border rounded">−</button>
                <span>{{ producto.cantidad }}</span>
                <button (click)="aumentarCantidad(producto)" class="w-8 h-8 border rounded">+</button>
              </div>
            </td>
            <td class="px-4 py-4 font-medium text-gray-700">
              S/. {{ producto.precio * producto.cantidad | number: '1.2-2' }}
            </td>
          </tr>
        </tbody>
      </table>

      <div class="flex items-center justify-between mt-6">
  <div class="flex flex-col">
    <div class="flex gap-2">
      <input type="text" [(ngModel)]="codigoDescuento" placeholder="Código de cupón"
        class="border px-4 py-2 rounded w-48" />
      <button (click)="aplicarCupon()" class="bg-gray-800 text-white px-4 py-2 rounded">
        Aplicar cupón
      </button>
    </div>
    <p *ngIf="cuponAplicado && !cuponValido" class="text-red-500 text-sm mt-1">Cupón no válido</p>
    <p *ngIf="cuponAplicado && cuponValido" class="text-green-600 text-sm mt-1">Cupón aplicado correctamente</p>

  </div>

  <button (click)="vaciarCarrito()" class="text-pink-600 underline">Vaciar carrito</button>
</div>

    </div>

    <div class="border border-gray-200 rounded p-6">
      <h2 class="text-lg font-semibold mb-4">Resumen del pedido</h2>
      <div class="flex justify-between py-2 border-b">
        <span>Ítems</span>
        <span>{{ obtenerTotalItems() }}</span>
      </div>
      <div class="flex justify-between py-2 border-b">
        <span>Subtotal</span>
        <span>S/. {{ obtenerSubtotal | number: '1.2-2' }}</span>
      </div>
      <div class="flex justify-between">
        <span>Delivery:</span>
        <span>S/ {{ delivery | number: '1.2-2' }}</span>
      </div>
      <div class="flex justify-between py-2 border-b">
        <span>Impuestos (18%)</span>
        <span>S/. {{ obtenerImpuestos | number: '1.2-2' }}</span>
      </div>
      <div class="flex justify-between" *ngIf="cuponAplicado && cuponValido">
        <span class="text-gray-600">Descuento aplicado:</span>
        <span class="text-gray-600">- S/ {{ obtenerDescuento | number: '1.2-2' }}</span>
      </div>


      <div class="flex justify-between py-2 font-bold text-lg">
        <span>Total</span>
        <span>S/. {{ obtenerTotal | number: '1.2-2' }}</span>
      </div>
      <button (click)="irACheckout()"  class="bg-pink-600 text-white w-full py-3 rounded mt-4">Proceder al pago</button>
    </div>
  </div>
</div>
