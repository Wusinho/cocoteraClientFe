<div class="grid grid-cols-1 md:grid-cols-2 gap-6 p-6">
  <div class="space-y-4">
    <h2 class="text-xl font-semibold mb-4">Selecciona tu método de pago</h2>

    <div class="border rounded-lg p-4 flex items-center gap-4 cursor-pointer hover:border-black transition"
         [class.border-black]="metodoSeleccionado === 'Efectivo'"
         (click)="seleccionarMetodo('Efectivo')">
      <input type="radio" name="metodoPago" class="accent-black" [checked]="metodoSeleccionado === 'Efectivo'" />
      <label class="text-gray-700 font-medium">Pago contra entrega</label>
    </div>

    <div *ngFor="let tarjeta of tarjetas" 
        class="border rounded-lg p-4 flex items-center justify-between gap-4 cursor-pointer hover:border-black transition"
        [class.border-black]="metodoSeleccionado === tarjeta.id.toString()">

      <div class="flex items-center gap-4" (click)="seleccionarMetodo(tarjeta.id.toString())">
        <input type="radio" name="metodoPago" class="accent-black" 
              [checked]="metodoSeleccionado === tarjeta.id.toString()" />
        <label class="text-gray-700 font-medium cursor-pointer">
          {{ tarjeta.tipo }} **** **** **** {{ tarjeta.numero.slice(-4) }}
        </label>
      </div>

      <button (click)="eliminarTarjeta(tarjeta.id); $event.stopPropagation()"
              class="text-red-500 hover:text-red-700 text-xl">
        <i class="fas fa-trash"></i>
      </button>

    </div>


    <div class="border-dashed border-2 rounded-lg p-4 text-center text-black font-medium cursor-pointer hover:bg-gray-50"
         (click)="mostrarFormulario = true">
      + Agregar nueva tarjeta de crédito/débito
    </div>

    <form *ngIf="mostrarFormulario" [formGroup]="formularioTarjeta" (ngSubmit)="agregarTarjeta()" class="space-y-4 mt-4">
        <input type="text" formControlName="numero" maxlength="16" placeholder="Número de tarjeta"
                class="w-full border rounded p-2" />
        <input type="text" formControlName="vencimiento" placeholder="MM/AA"
                class="w-full border rounded p-2" />
        <input type="text" formControlName="nombre" placeholder="Nombre del titular"
                class="w-full border rounded p-2" />
        <button type="submit" class="bg-black text-white px-4 py-2 rounded">Guardar tarjeta</button>

    </form>

  </div>

  <div class="border border-gray-200 rounded p-6">
    <h3 class="text-xl font-semibold mb-4">Resumen del Pedido</h3>
  <div class="space-y-2 text-gray-700" *ngIf="totalArticulos > 0">
    <div class="flex justify-between">
        <span>Artículos</span>
        <span>{{ totalArticulos }}</span>
    </div>

    <div class="flex justify-between">
      <span>Subtotal</span>
      <span>S/.{{ subtotal | number: '1.2-2' }}</span>
    </div>

    <div class="flex justify-between">
      <span>Delivery</span>
      <span>S/.{{ delivery | number: '1.2-2' }}</span>
    </div>

    <div class="flex justify-between">
      <span>Impuestos</span>
      <span>S/.{{ impuestos | number: '1.2-2' }}</span>
    </div>

    <div class="flex justify-between text-green-600" *ngIf="descuento > 0">
      <span>Descuento por cupón</span>
      <span>-S/.{{ descuento | number: '1.2-2' }}</span>
    </div>

    <div class="flex justify-between font-bold text-lg pt-2 border-t">
      <span>Total</span>
      <span>S/.{{ total | number: '1.2-2' }}</span>
    </div>
  </div>

    <button (click)="irOrdenPagada()" class="mt-6 w-full bg-[#4B200F] text-white py-2 rounded hover:bg-[#381808] transition">
      Continuar con el Pago
    </button>
  </div>
</div>
